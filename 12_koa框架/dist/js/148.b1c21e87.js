"use strict";(self["webpackChunkvue3_ts_cms"]=self["webpackChunkvue3_ts_cms"]||[]).push([[148],{7678:function(e,t,a){a.d(t,{Z:function(){return m}});var l=a(3396),o=a(7139);const n={class:"mwm-form"},i={class:"header"},r={class:"footer"};function d(e,t,a,d,s,u){const p=(0,l.up)("el-input"),c=(0,l.up)("el-option"),m=(0,l.up)("el-select"),g=(0,l.up)("el-date-picker"),f=(0,l.up)("el-form-item"),h=(0,l.up)("el-col"),w=(0,l.up)("el-row"),y=(0,l.up)("el-form");return(0,l.wg)(),(0,l.iD)("div",n,[(0,l._)("div",i,[(0,l.WI)(e.$slots,"header",{},void 0,!0)]),(0,l.Wm)(y,{ref:"form","label-width":e.labelWidth},{default:(0,l.w5)((()=>[(0,l.Wm)(w,null,{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.formItems,(t=>((0,l.wg)(),(0,l.j4)(h,(0,l.dG)(e.colLayout,{key:t.label}),{default:(0,l.w5)((()=>[t.isHidden?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(f,{key:0,label:t.label,rules:t.rules,style:(0,o.normalizeStyle)(e.itemStyle)},{default:(0,l.w5)((()=>["input"===t.type||"password"===t.type?((0,l.wg)(),(0,l.j4)(p,{key:0,placeholder:t.placeholder,"show-password":"password"===t.type,"model-value":e.modelValue[`${t.field}`],"onUpdate:modelValue":a=>e.handelValueChange(a,t.field)},null,8,["placeholder","show-password","model-value","onUpdate:modelValue"])):"select"===t.type?((0,l.wg)(),(0,l.j4)(m,{key:1,placeholder:t.placeholder,style:{width:"80%"},"model-value":e.modelValue[`${t.field}`],"onUpdate:modelValue":a=>e.handelValueChange(a,t.field)},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t.options,(e=>((0,l.wg)(),(0,l.j4)(c,{key:e.value,value:e.value},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.toDisplayString)(e.label),1)])),_:2},1032,["value"])))),128))])),_:2},1032,["placeholder","model-value","onUpdate:modelValue"])):"datepicker"===t.type?((0,l.wg)(),(0,l.j4)(g,(0,l.dG)({key:2,type:"date",placeholder:t.placeholder,style:{width:"80%"}},t.otherOptions,{"model-value":e.modelValue[`${t.field}`],"onUpdate:modelValue":a=>e.handelValueChange(a,t.field)}),null,16,["placeholder","model-value","onUpdate:modelValue"])):(0,l.kq)("",!0)])),_:2},1032,["label","rules","style"]))])),_:2},1040)))),128))])),_:1})])),_:1},8,["label-width"]),(0,l._)("div",r,[(0,l.WI)(e.$slots,"footer",{},void 0,!0)])])}var s=(0,l.aZ)({name:"fromView",props:{modelValue:{type:Object,required:!0},formItems:{type:Array,default:()=>[]},labelWidth:{type:String,default:"100px"},itemStyle:{type:Object,default:()=>({padding:"10px 30px"})},colLayout:{type:Object,default:()=>({xl:6,lg:8,md:12,sm:24,xs:24})}},emits:["update:modelValue"],setup(e,{emit:t}){const a=(a,l)=>{t("update:modelValue",{...e.modelValue,[l]:a})};return{handelValueChange:a}}}),u=a(89);const p=(0,u.Z)(s,[["render",d],["__scopeId","data-v-14452024"]]);var c=p,m=c},3019:function(e,t,a){a.d(t,{Z:function(){return S}});var l=a(3396),o=a(7139);const n={class:"page-content"},i={class:"handler-btns"};function r(e,t,a,r,d,s){const u=(0,l.up)("el-button"),p=(0,l.up)("mwm-table");return(0,l.wg)(),(0,l.iD)("div",n,[(0,l.Wm)(p,(0,l.dG)({userList:e.dataList},e.contentTableConfig,{listCount:e.dataCount,page:e.pageInfo,"onUpdate:page":t[0]||(t[0]=t=>e.pageInfo=t)}),(0,l.Nv)({handlerHandler:(0,l.w5)((()=>[e.isCreate?((0,l.wg)(),(0,l.j4)(u,{key:0,onClick:e.handlerNewClick,size:"medium",type:"primary"},{default:(0,l.w5)((()=>[(0,l.Uk)("新建数据")])),_:1},8,["onClick"])):(0,l.kq)("",!0),(0,l.Wm)(u,{icon:"el-icon-refresh",size:"medium"})])),createAt:(0,l.w5)((t=>[(0,l._)("span",null,(0,o.toDisplayString)(e.$filters.formatTime(t.row.createAt)),1)])),updateAt:(0,l.w5)((t=>[(0,l._)("span",null,(0,o.toDisplayString)(e.$filters.formatTime(t.row.updateAt)),1)])),handler:(0,l.w5)((t=>[(0,l._)("div",i,[e.isUpdate?((0,l.wg)(),(0,l.j4)(u,{key:0,type:"text",size:"mini",icon:"el-icon-edit",onClick:a=>e.handleEditClick(t.row)},{default:(0,l.w5)((()=>[(0,l.Uk)("编辑")])),_:2},1032,["onClick"])):(0,l.kq)("",!0),e.isDelete?((0,l.wg)(),(0,l.j4)(u,{key:1,type:"text",size:"mini",icon:"el-icon-delete",onClick:a=>e.handleDeleteClick(t.row)},{default:(0,l.w5)((()=>[(0,l.Uk)("删除")])),_:2},1032,["onClick"])):(0,l.kq)("",!0)])])),_:2},[(0,l.Ko)(e.otherPropSlots,(t=>({name:t.slotName,fn:(0,l.w5)((a=>[t.slotName?(0,l.WI)(e.$slots,t.slotName,{key:0,row:a.row},void 0,!0):(0,l.kq)("",!0)]))})))]),1040,["userList","listCount","page"])])}var d=a(4870),s=a(65);const u={class:"mwm-table"},p={class:"header"},c={class:"title"},m={class:"handler"},g={key:0,class:"footer"};function f(e,t,a,n,i,r){const d=(0,l.up)("el-table-column"),s=(0,l.up)("el-table"),f=(0,l.up)("el-pagination");return(0,l.wg)(),(0,l.iD)("div",u,[(0,l._)("div",p,[(0,l.WI)(e.$slots,"header",{},(()=>[(0,l._)("div",c,(0,o.toDisplayString)(e.title),1),(0,l._)("div",m,[(0,l.WI)(e.$slots,"handlerHandler",{},void 0,!0)])]),!0)]),(0,l.Wm)(s,(0,l.dG)({data:e.userList,border:""},e.childrenProps,{style:{width:"100%"},onSelectionChange:e.handleSelectionChange}),{default:(0,l.w5)((()=>[e.showSelectColumn?((0,l.wg)(),(0,l.j4)(d,{key:0,"show-overflow-tooltip":"",type:"selection",align:"center",label:"label"})):(0,l.kq)("",!0),e.showIndexColumn?((0,l.wg)(),(0,l.j4)(d,{key:1,"show-overflow-tooltip":"",type:"index",label:"序号",align:"center",width:"60"})):(0,l.kq)("",!0),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.propList,(t=>((0,l.wg)(),(0,l.j4)(d,{key:t.prop,prop:t.prop,"show-overflow-tooltip":"",label:t.label,"min-width":t.minWidth,align:"center"},{default:(0,l.w5)((({row:a})=>[(0,l.WI)(e.$slots,t.slotName,{row:a},(()=>[(0,l.Uk)((0,o.toDisplayString)(a[t.prop]),1)]),!0)])),_:2},1032,["prop","label","min-width"])))),128))])),_:3},16,["data","onSelectionChange"]),e.showFooter?((0,l.wg)(),(0,l.iD)("div",g,[(0,l.WI)(e.$slots,"footer",{},(()=>[(0,l.Wm)(f,{currentPage:e.page.currentPage,"onUpdate:currentPage":t[0]||(t[0]=t=>e.page.currentPage=t),"page-size":e.page.pageSize,"onUpdate:page-size":t[1]||(t[1]=t=>e.page.pageSize=t),"page-sizes":[1,5,10],layout:"total, sizes, prev, pager, next, jumper",total:e.listCount,onSizeChange:e.handleSizeChange,onCurrentChange:e.handleCurrentChange},null,8,["currentPage","page-size","total","onSizeChange","onCurrentChange"])]),!0)])):(0,l.kq)("",!0)])}var h=(0,l.aZ)({name:"MwmTableView",props:{userList:{type:Array,required:!0},propList:{type:Array,required:!0},listCount:{type:Number,default:0},showIndexColumn:{type:Boolean,default:!1},showSelectColumn:{type:Boolean,default:!1},title:{type:String,default:""},page:{type:Object,default:()=>({currentPage:0,pageSize:10})},childrenProps:{type:Object,default:()=>({})},showFooter:{type:Boolean,default:!0}},emits:["selectionChange","update:page"],setup(e,{emit:t}){const a=e=>{t("selectionChange",e)},l=a=>{t("update:page",{...e.page,pageSize:a})},o=a=>{t("update:page",{...e.page,currentPage:a})};return{handleSelectionChange:a,handleSizeChange:l,handleCurrentChange:o}}}),w=a(89);const y=(0,w.Z)(h,[["render",f],["__scopeId","data-v-6aeba4b9"]]);var C=y,k=C;function v(e,t){const a=(0,s.oR)(),l=a.state.login.permissions,o=`system:${e}:${t}`;return Boolean(l.find((e=>e===o)))}var b=(0,l.aZ)({props:{contentTableConfig:{type:Object,required:!0},pageName:{type:String,required:!0}},components:{MwmTable:k},emits:["newBtnClick","editBtnClick"],setup(e,{emit:t}){const a=(0,s.oR)(),o=v(e.pageName,"create"),n=v(e.pageName,"delete"),i=v(e.pageName,"update"),r=v(e.pageName,"query"),u=(0,d.iH)({currentPage:1,pageSize:10});(0,l.YP)(u,(()=>p()));const p=(t={})=>{r&&a.dispatch("system/getPageListAction",{pageName:e.pageName,queryInfo:{offset:u.value.pageSize*(u.value.currentPage-1),size:u.value.pageSize,...t}})};p();const c=(0,l.Fl)((()=>a.getters["system/pageListData"](e.pageName))),m=(0,l.Fl)((()=>a.getters["system/pageListCount"](e.pageName))),g=e.contentTableConfig?.propList.filter((e=>{if("createAt"!==e.slotName&&"updateAt"!==e.slotName&&"handler"!==e.slotName)return!0})),f=t=>{a.dispatch("system/deletePageDataAction",{pageName:e.pageName,id:t.id})},h=e=>{t("editBtnClick",e)},w=()=>{t("newBtnClick")};return{dataList:c,dataCount:m,pageInfo:u,otherPropSlots:g,isCreate:o,isDelete:n,isUpdate:i,getPageData:p,handlerNewClick:w,handleEditClick:h,handleDeleteClick:f}}});const _=(0,w.Z)(b,[["render",r],["__scopeId","data-v-7010e2e6"]]);var V=_,S=V},5947:function(e,t,a){a.d(t,{Z:function(){return m}});var l=a(3396);const o={class:"dialog-footer"};function n(e,t,a,n,i,r){const d=(0,l.up)("mwm-form"),s=(0,l.up)("el-button"),u=(0,l.up)("el-dialog");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)(u,{modelValue:e.dialogVisible,"onUpdate:modelValue":t[2]||(t[2]=t=>e.dialogVisible=t),title:"新建用户",width:"30%",center:"","destroy-on-close":""},{footer:(0,l.w5)((()=>[(0,l._)("span",o,[(0,l.Wm)(s,{onClick:t[1]||(t[1]=t=>e.dialogVisible=!1)},{default:(0,l.w5)((()=>[(0,l.Uk)("取消")])),_:1}),(0,l.Wm)(s,{type:"primary",onClick:e.handleConfirmClick},{default:(0,l.w5)((()=>[(0,l.Uk)("确定")])),_:1},8,["onClick"])])])),default:(0,l.w5)((()=>[(0,l.Wm)(d,(0,l.dG)(e.modalConfig,{modelValue:e.fromData,"onUpdate:modelValue":t[0]||(t[0]=t=>e.fromData=t)}),null,16,["modelValue"]),(0,l.WI)(e.$slots,"default")])),_:3},8,["modelValue"])])}var i=a(4870),r=a(65),d=a(7678),s=(0,l.aZ)({props:{modalConfig:{type:Object,required:!0},pageName:{type:String,required:!0},defaultInfo:{type:Object,default:()=>({})},otherInfo:{type:Object,defaukt:()=>({})}},components:{MwmForm:d.Z},setup(e){const t=(0,i.iH)(!1),a=(0,i.iH)({}),o=(0,r.oR)();(0,l.YP)((()=>e.defaultInfo),(t=>{for(const l of e.modalConfig.formItems)a.value[`${l.field}`]=t[`${l.field}`]}));const n=()=>{t.value=!1,Object.keys(e.defaultInfo).length?o.dispatch("system/editPageDataAction",{pageName:e.pageName,editData:{...a.value,...e.otherInfo},id:e.defaultInfo.id}):o.dispatch("system/createPageDataAction",{pageName:e.pageName,newData:{...a.value,...e.otherInfo}})};return{dialogVisible:t,fromData:a,handleConfirmClick:n}}}),u=a(89);const p=(0,u.Z)(s,[["render",n]]);var c=p,m=c},8972:function(e,t,a){a.d(t,{Z:function(){return f}});var l=a(3396);const o=e=>((0,l.dD)("data-v-c9b62870"),e=e(),(0,l.Cn)(),e),n={class:"page-search"},i=o((()=>(0,l._)("h1",{class:"header"},"高级检索",-1))),r={class:"footer"};function d(e,t,a,o,d,s){const u=(0,l.up)("el-button"),p=(0,l.up)("mwm-from");return(0,l.wg)(),(0,l.iD)("div",n,[(0,l.Wm)(p,(0,l.dG)(e.searchFormConfig,{modelValue:e.formData,"onUpdate:modelValue":t[0]||(t[0]=t=>e.formData=t)}),{header:(0,l.w5)((()=>[i])),footer:(0,l.w5)((()=>[(0,l._)("div",r,[(0,l.Wm)(u,{icon:"el-icon-refresh-right",onClick:e.handleResetClick},{default:(0,l.w5)((()=>[(0,l.Uk)("重置")])),_:1},8,["onClick"]),(0,l.Wm)(u,{type:"primary",icon:"el-icon-search",onClick:e.handleQueryClick},{default:(0,l.w5)((()=>[(0,l.Uk)("搜索")])),_:1},8,["onClick"])])])),_:1},16,["modelValue"])])}var s=a(4870),u=a(7678),p=(0,l.aZ)({name:"pageSearchView",components:{MwmFrom:u.Z},props:{searchFormConfig:{type:Object,required:!0}},emits:["resetBtnClick","queryBtnClick"],setup(e,{emit:t}){const a=e.searchFormConfig?.formItems??[],l={};for(const r of a)l[r.field]="";const o=(0,s.iH)(l),n=()=>{o.value=l,t("resetBtnClick")},i=()=>{t("queryBtnClick",o.value)};return{formData:o,handleResetClick:n,handleQueryClick:i}}}),c=a(89);const m=(0,c.Z)(p,[["render",d],["__scopeId","data-v-c9b62870"]]);var g=m,f=g},7010:function(e,t,a){a.d(t,{S:function(){return o}});var l=a(4870);function o(e,t){const a=(0,l.iH)({}),o=(0,l.iH)(),n=()=>{a.value={},o.value&&(o.value.dialogVisible=!0),e&&e()},i=e=>{a.value={...e},o.value&&(o.value.dialogVisible=!0),t&&t(e)};return[a,o,n,i]}}}]);
//# sourceMappingURL=148.b1c21e87.js.map